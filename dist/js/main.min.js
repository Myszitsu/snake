"use strict";var interval,isArrow,playground=document.querySelector(".playground"),snake=document.querySelector(".snake"),apple=document.querySelector(".apple"),span=document.querySelector(".span"),btn=document.querySelector(".btn"),h1=document.querySelector(".h1"),snakes=[snake],difficulty=25,direction="",lost=0,range=180,h=range,rangeFlipper=0,score=difficulty,isReady=!0,hasStarted=0;span.textContent=score,apple.style.top=15*Math.floor(44*Math.random())+"px",apple.style.left=15*Math.floor(80*Math.random())+"px",snake.style.top="360px",snake.style.left="585px";var position={top:+snake.style.top.slice(0,-2),left:+snake.style.left.slice(0,-2)},setColor=function(e){h=range,e.style.backgroundColor="hsl(".concat(h,", 80%, 50%)"),range<360&&0===rangeFlipper?range++:360===range?(rangeFlipper=1,range--):180===--range&&(rangeFlipper=0)},app=function(){var e=document.createElement("div");e.classList.add("snake"),e.style.top=snakes[snakes.length-1].style.top,e.style.left=snakes[snakes.length-1].style.left,setColor(e),playground.append(e),snakes.push(e)},grow=function(){1===snakes.length&&(snakes[0].style.backgroundColor="hsl(".concat(h,", 80%, 50%)")),apple.style.top=15*Math.floor(44*Math.random())+"px",apple.style.left=15*Math.floor(80*Math.random())+"px",app(),score--,span.style.color="hsl(".concat(h,", 80%, 50%)"),span.textContent=score},dirCheck=function(e){0===hasStarted&&(h1.classList.remove("active"),hasStarted=1),"ArrowLeft"===e.key||"ArrowUp"===e.key?(direction=-1,clearInterval(interval)):"ArrowRight"!==e.key&&"ArrowDown"!==e.key||(direction=1,clearInterval(interval))},movementVertical=function(){if(1<snakes.length&&position.top+15*direction===+snakes[1].style.top.slice(0,-2)&&(direction*=-1),position.top+=15*direction,1<snakes.length){for(var e=snakes.length-1;0<e;e--)snakes[e].style.left=snakes[e-1].style.left,snakes[e].style.top=snakes[e-1].style.top;snakes[0].style.top="".concat(position.top,"px")}else 1===snakes.length&&(snakes[0].style.top="".concat(position.top,"px"));isReady=!0},movementHorizontal=function(){if(1<snakes.length&&position.left+15*direction===+snakes[1].style.left.slice(0,-2)&&(direction*=-1),position.left+=15*direction,1<snakes.length){for(var e=snakes.length-1;0<e;e--)snakes[e].style.left=snakes[e-1].style.left,snakes[e].style.top=snakes[e-1].style.top;snakes[0].style.left="".concat(position.left,"px")}else 1===snakes.length&&(snakes[0].style.left="".concat(position.left,"px"));isReady=!0},win=function(){clearInterval(interval),h1.classList.add("win"),h1.textContent="collected all apples",lost=1,apple.style.display="none",btn.classList.add("active")},defeat=function(){clearInterval(interval),snakes.forEach(function(e){return e.style.backgroundColor="red"}),h1.classList.add("lost"),h1.textContent="game over",lost=1,apple.style.display="none",btn.classList.add("active")},checkPosition=function(){snakes[0].getBoundingClientRect().left===playground.getBoundingClientRect().right?(snakes[0].style.left="0px",position.left=+snake.style.left.slice(0,-2)):snakes[0].getBoundingClientRect().left+15===playground.getBoundingClientRect().left?(snakes[0].style.left=playground.clientWidth-15+"px",position.left=+snake.style.left.slice(0,-2)):snakes[0].getBoundingClientRect().top===playground.getBoundingClientRect().bottom?(snakes[0].style.top="0px",position.top=+snake.style.top.slice(0,-2)):snakes[0].getBoundingClientRect().top+15===playground.getBoundingClientRect().top&&(snakes[0].style.top=playground.clientHeight-15+"px",position.top=+snake.style.top.slice(0,-2))},steer=function(t){dirCheck(t),interval=setInterval(function(){"ArrowLeft"===t.key||"ArrowRight"===t.key?movementHorizontal():"ArrowUp"!==t.key&&"ArrowDown"!==t.key||movementVertical(),checkPosition(),snakes[0].style.top===apple.style.top&&snakes[0].style.left===apple.style.left&&(grow(),0===score&&win());for(var e=snakes.length-1;1<e;e--)snakes[e].style.left===snakes[0].style.left&&snakes[e].style.top===snakes[0].style.top&&defeat()},50)},refresh=function(){for(var e=snakes.length-1;0<e;e--)snakes[e].remove(),snakes.pop();console.log(snakes),btn.classList.remove("active"),h1.classList.remove("win"),h1.classList.remove("lost"),h1.classList.add("active"),h1.textContent="navigate with arrows",direction="",h=range=180,score=difficulty,hasStarted=rangeFlipper=lost=0,span.textContent=score,apple.style.top=15*Math.floor(50*Math.random())+"px",apple.style.left=15*Math.floor(80*Math.random())+"px",snake.style.top="360px",snake.style.left="585px",snake.style.backgroundColor="#fff",position.top=+snake.style.top.slice(0,-2),position.left=+snake.style.left.slice(0,-2),apple.style.display="block"};document.addEventListener("keydown",function(e){0===lost&&e.key.includes("Arrow")&&isReady&&(isReady=!1,steer(e))}),btn.addEventListener("click",refresh);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsic25ha2VzIiwicmFuZ2VGbGlwcGVyIiwicGxheWdyb3VuZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNuYWtlIiwiYXBwbGUiLCJzcGFuIiwiYnRuIiwiaDEiLCJkaWZmaWN1bHR5IiwiaW50ZXJ2YWwiLCJkaXJlY3Rpb24iLCJsb3N0IiwicmFuZ2UiLCJoIiwic2NvcmUiLCJpc0Fycm93IiwiaGFzU3RhcnRlZCIsInRleHRDb250ZW50IiwiTWF0aCIsInJhbmRvbSIsInN0eWxlIiwidG9wIiwiZmxvb3IiLCJsZWZ0IiwicG9zaXRpb24iLCJzbGljZSIsInNldENvbG9yIiwiZWwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJhcHAiLCJzbmFrZUVsIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImxlbmd0aCIsImFwcGVuZCIsImdyb3ciLCJjb25jYXQiLCJjb2xvciIsImRpckNoZWNrIiwiZSIsInJlbW92ZSIsImtleSIsImNsZWFySW50ZXJ2YWwiLCJtb3ZlbWVudFZlcnRpY2FsIiwiaSIsImlzUmVhZHkiLCJtb3ZlbWVudEhvcml6b250YWwiLCJ3aW4iLCJkaXNwbGF5IiwiZm9yRWFjaCIsInMiLCJkZWZlYXQiLCJjaGVja1Bvc2l0aW9uIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmlnaHQiLCJjbGllbnRXaWR0aCIsImJvdHRvbSIsImNsaWVudEhlaWdodCIsInNldEludGVydmFsIiwic3RlZXIiLCJyZWZyZXNoIiwicG9wIiwiY29uc29sZSIsImxvZyIsImluY2x1ZGVzIiwiYWRkRXZlbnRMaXN0ZW5lciJdLCJtYXBwaW5ncyI6ImFBQUEsSUFNTUEsU0FPRkMsUUFiRUMsV0FBYUMsU0FBU0MsY0FBYyxlQUNwQ0MsTUFBUUYsU0FBU0MsY0FBYyxVQUQvQkYsTUFBVUMsU0FBR0EsY0FBU0MsVUFDdEJDLEtBQVFGLFNBQVNDLGNBQWMsU0FDL0JFLElBQVFILFNBQVNDLGNBQWMsUUFDL0JHLEdB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QUFNRixLQUN6RmUsVUFHQyxLQUlGeUIsUUFBVSxXQUNULElBQUEsSUFBSS9ELEVBQUFBLE9BQVVzQixPQUFWLEVBQXlCdEIsRUFBekIrQyxFQUF5Qi9DLElBQzVCc0QsT0FBTVAsR0FBQUosU0FDTjNDLE9BQUFnRSxNQW5CbUJDLFFBQXRCQyxJQUFBbEUsUUFGRFEsSUFBQTBCLFVBQUFTLE9BQUEsVUFrQ0NsQyxHQUFHeUIsVUFBVVMsT0FBTyxPQVByQmxDLEdBQU1zRCxVQUFVcEIsT0FBQSxRQUNmbEMsR0FBQXlCLFVBQVVDLElBQUduQyxVQUNOQSxHQUFBQSxZQUFBLHVCQUNBQSxVQUFPZ0UsR0FFWEMsRUFRSG5ELE1BQVEsSUFOUkwsTUFBR3lCLFdBQ0h6QixXQUZBRCxhQUZJSyxLQUFBLEVBS0ZOLEtBQUMyQixZQUFjbEIsTUFDZFAsTUFBR1UsTUFBQUEsSUFBSCxHQUFpQkMsS0FBQUksTUFBakIsR0FBaUJKLEtBQUFDLFVBQWpCLEtBQ0hULE1BQUFBLE1BQVNhLEtBQVQsR0FBQUwsS0FBQUksTUFBQSxHQUFBSixLQUFBQyxVQUFBLEtBQ0FSLE1BQUlTLE1BQUpDLElBQUEsUUFDQVQsTUFBS1EsTUFBTEcsS0FBQSxRQUNBVixNQUFJRCxNQUFKZ0IsZ0JBQUEsT0FDQTdCLFNBQUFBLEtBQUFJLE1BQUFpQixNQUFBQyxJQUFBSSxNQUFBLEdBQUEsR0FDQVgsU0FBUU4sTUFBUkwsTUFBQWlCLE1BQUFHLEtBQUFFLE1BQUEsR0FBQSxHQUNBVCxNQUFBQSxNQUFBaUMsUUFBQSxTQUlBOUMsU0FBTWlCLGlCQUFZLFVBQWxCLFNBQUFvQixHQUNZakIsSUFBWnBCLE1BQUFxQyxFQUFtQkUsSUFBQXVCLFNBQW5CLFVBQUFuQixVQUNBM0MsU0FBTWlCLEVBQ0hJLE1BQUFBLE1BT0hsQixJQUFBNEQsaUJBQW1CLFFBQUtEIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcGxheWdyb3VuZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5Z3JvdW5kJylcclxuY29uc3Qgc25ha2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc25ha2UnKVxyXG5jb25zdCBhcHBsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHBsZScpXHJcbmNvbnN0IHNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3BhbicpXHJcbmNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4nKVxyXG5jb25zdCBoMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oMScpXHJcbmNvbnN0IHNuYWtlcyA9IFtzbmFrZV1cclxubGV0IGRpZmZpY3VsdHkgPSAyNVxyXG5sZXQgaW50ZXJ2YWxcclxubGV0IGRpcmVjdGlvbiA9ICcnXHJcbmxldCBsb3N0ID0gMFxyXG5sZXQgcmFuZ2UgPSAxODBcclxubGV0IGggPSByYW5nZVxyXG5sZXQgcmFuZ2VGbGlwcGVyID0gMFxyXG5sZXQgc2NvcmUgPSBkaWZmaWN1bHR5XHJcbmxldCBpc0Fycm93XHJcbmxldCBpc1JlYWR5ID0gdHJ1ZTtcclxubGV0IGhhc1N0YXJ0ZWQgPSAwXHJcblxyXG5zcGFuLnRleHRDb250ZW50ID0gc2NvcmVcclxuYXBwbGUuc3R5bGUudG9wID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNDQpICogMTUgKyAncHgnXHJcbmFwcGxlLnN0eWxlLmxlZnQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4MCkgKiAxNSArICdweCdcclxuc25ha2Uuc3R5bGUudG9wID0gJzM2MHB4J1xyXG5zbmFrZS5zdHlsZS5sZWZ0ID0gJzU4NXB4J1xyXG5cclxuY29uc3QgcG9zaXRpb24gPSB7XHJcblx0dG9wOiArc25ha2Uuc3R5bGUudG9wLnNsaWNlKDAsIC0yKSxcclxuXHRsZWZ0OiArc25ha2Uuc3R5bGUubGVmdC5zbGljZSgwLCAtMiksXHJcbn1cclxuXHJcbmNvbnN0IHNldENvbG9yID0gZWwgPT4ge1xyXG5cdGggPSByYW5nZVxyXG5cdGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGBoc2woJHtofSwgODAlLCA1MCUpYFxyXG5cdGlmIChyYW5nZSA8IDM2MCAmJiByYW5nZUZsaXBwZXIgPT09IDApIHtcclxuXHRcdHJhbmdlKytcclxuXHR9IGVsc2UgaWYgKHJhbmdlID09PSAzNjApIHtcclxuXHRcdHJhbmdlRmxpcHBlciA9IDFcclxuXHRcdHJhbmdlLS1cclxuXHR9IGVsc2Uge1xyXG5cdFx0cmFuZ2UtLVxyXG5cdFx0aWYgKHJhbmdlID09PSAxODApIHtcclxuXHRcdFx0cmFuZ2VGbGlwcGVyID0gMFxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuY29uc3QgYXBwID0gKCkgPT4ge1xyXG5cdGNvbnN0IHNuYWtlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cdHNuYWtlRWwuY2xhc3NMaXN0LmFkZCgnc25ha2UnKVxyXG5cdHNuYWtlRWwuc3R5bGUudG9wID0gc25ha2VzW3NuYWtlcy5sZW5ndGggLSAxXS5zdHlsZS50b3BcclxuXHRzbmFrZUVsLnN0eWxlLmxlZnQgPSBzbmFrZXNbc25ha2VzLmxlbmd0aCAtIDFdLnN0eWxlLmxlZnRcclxuXHRzZXRDb2xvcihzbmFrZUVsKVxyXG5cclxuXHRwbGF5Z3JvdW5kLmFwcGVuZChzbmFrZUVsKVxyXG5cdHNuYWtlcy5wdXNoKHNuYWtlRWwpXHJcbn1cclxuXHJcbmNvbnN0IGdyb3cgPSAoKSA9PiB7XHJcblx0aWYgKHNuYWtlcy5sZW5ndGggPT09IDEpIHtcclxuXHRcdHNuYWtlc1swXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBgaHNsKCR7aH0sIDgwJSwgNTAlKWBcclxuXHR9XHJcblx0YXBwbGUuc3R5bGUudG9wID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNDQpICogMTUgKyAncHgnXHJcblx0YXBwbGUuc3R5bGUubGVmdCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgwKSAqIDE1ICsgJ3B4J1xyXG5cdGFwcCgpXHJcblx0c2NvcmUtLVxyXG5cdHNwYW4uc3R5bGUuY29sb3IgPSBgaHNsKCR7aH0sIDgwJSwgNTAlKWBcclxuXHRzcGFuLnRleHRDb250ZW50ID0gc2NvcmVcclxufVxyXG5cclxuY29uc3QgZGlyQ2hlY2sgPSBlID0+IHtcclxuXHRpZiAoaGFzU3RhcnRlZCA9PT0gMCkge1xyXG5cdFx0aDEuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuXHRcdGhhc1N0YXJ0ZWQgPSAxO1xyXG5cdH1cclxuXHRpZiAoZS5rZXkgPT09ICdBcnJvd0xlZnQnIHx8IGUua2V5ID09PSAnQXJyb3dVcCcpIHtcclxuXHRcdGRpcmVjdGlvbiA9IC0xXHJcblx0XHRjbGVhckludGVydmFsKGludGVydmFsKVxyXG5cdH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1JpZ2h0JyB8fCBlLmtleSA9PT0gJ0Fycm93RG93bicpIHtcclxuXHRcdGRpcmVjdGlvbiA9IDFcclxuXHRcdGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBtb3ZlbWVudFZlcnRpY2FsID0gKCkgPT4ge1xyXG5cdGlmIChzbmFrZXMubGVuZ3RoID4gMSAmJiBwb3NpdGlvbi50b3AgKyAxNSAqIGRpcmVjdGlvbiA9PT0gK3NuYWtlc1sxXS5zdHlsZS50b3Auc2xpY2UoMCwgLTIpKSB7XHJcblx0XHRkaXJlY3Rpb24gKj0gLTFcclxuXHR9XHJcblx0cG9zaXRpb24udG9wICs9IDE1ICogZGlyZWN0aW9uXHJcblx0aWYgKHNuYWtlcy5sZW5ndGggPiAxKSB7XHJcblx0XHRmb3IgKGxldCBpID0gc25ha2VzLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuXHRcdFx0c25ha2VzW2ldLnN0eWxlLmxlZnQgPSBzbmFrZXNbaSAtIDFdLnN0eWxlLmxlZnRcclxuXHRcdFx0c25ha2VzW2ldLnN0eWxlLnRvcCA9IHNuYWtlc1tpIC0gMV0uc3R5bGUudG9wXHJcblx0XHR9XHJcblx0XHRzbmFrZXNbMF0uc3R5bGUudG9wID0gYCR7cG9zaXRpb24udG9wfXB4YFxyXG5cdH0gZWxzZSBpZiAoc25ha2VzLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0c25ha2VzWzBdLnN0eWxlLnRvcCA9IGAke3Bvc2l0aW9uLnRvcH1weGBcclxuXHR9XHJcblxyXG5cdGlzUmVhZHkgPSB0cnVlXHJcbn1cclxuXHJcbmNvbnN0IG1vdmVtZW50SG9yaXpvbnRhbCA9ICgpID0+IHtcclxuXHRpZiAoc25ha2VzLmxlbmd0aCA+IDEgJiYgcG9zaXRpb24ubGVmdCArIDE1ICogZGlyZWN0aW9uID09PSArc25ha2VzWzFdLnN0eWxlLmxlZnQuc2xpY2UoMCwgLTIpKSB7XHJcblx0XHRkaXJlY3Rpb24gKj0gLTFcclxuXHR9XHJcblx0cG9zaXRpb24ubGVmdCArPSAxNSAqIGRpcmVjdGlvblxyXG5cclxuXHRpZiAoc25ha2VzLmxlbmd0aCA+IDEpIHtcclxuXHRcdGZvciAobGV0IGkgPSBzbmFrZXMubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xyXG5cdFx0XHRzbmFrZXNbaV0uc3R5bGUubGVmdCA9IHNuYWtlc1tpIC0gMV0uc3R5bGUubGVmdFxyXG5cdFx0XHRzbmFrZXNbaV0uc3R5bGUudG9wID0gc25ha2VzW2kgLSAxXS5zdHlsZS50b3BcclxuXHRcdH1cclxuXHRcdHNuYWtlc1swXS5zdHlsZS5sZWZ0ID0gYCR7cG9zaXRpb24ubGVmdH1weGBcclxuXHR9IGVsc2UgaWYgKHNuYWtlcy5sZW5ndGggPT09IDEpIHtcclxuXHRcdHNuYWtlc1swXS5zdHlsZS5sZWZ0ID0gYCR7cG9zaXRpb24ubGVmdH1weGBcclxuXHR9XHJcblxyXG5cdGlzUmVhZHkgPSB0cnVlXHJcblxyXG59XHJcblxyXG5jb25zdCB3aW4gPSAoKSA9PiB7XHJcblx0Y2xlYXJJbnRlcnZhbChpbnRlcnZhbClcclxuXHRoMS5jbGFzc0xpc3QuYWRkKCd3aW4nKVxyXG5cdGgxLnRleHRDb250ZW50ID0gJ2NvbGxlY3RlZCBhbGwgYXBwbGVzJ1xyXG5cdGxvc3QgPSAxXHJcblx0YXBwbGUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbn1cclxuXHJcbmNvbnN0IGRlZmVhdCA9ICgpID0+IHtcclxuXHRjbGVhckludGVydmFsKGludGVydmFsKVxyXG5cdHNuYWtlcy5mb3JFYWNoKHMgPT4gKHMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JlZCcpKVxyXG5cdGgxLmNsYXNzTGlzdC5hZGQoJ2xvc3QnKVxyXG5cdGgxLnRleHRDb250ZW50ID0gJ2dhbWUgb3ZlcidcclxuXHRsb3N0ID0gMVxyXG5cdGFwcGxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG59XHJcblxyXG5jb25zdCBjaGVja1Bvc2l0aW9uID0gKCkgPT4ge1xyXG5cdGlmIChzbmFrZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCA9PT0gcGxheWdyb3VuZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCkge1xyXG5cdFx0c25ha2VzWzBdLnN0eWxlLmxlZnQgPSBgMHB4YFxyXG5cdFx0cG9zaXRpb24ubGVmdCA9ICtzbmFrZS5zdHlsZS5sZWZ0LnNsaWNlKDAsIC0yKVxyXG5cdH0gZWxzZSBpZiAoc25ha2VzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyAxNSA9PT0gcGxheWdyb3VuZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0KSB7XHJcblx0XHRzbmFrZXNbMF0uc3R5bGUubGVmdCA9IHBsYXlncm91bmQuY2xpZW50V2lkdGggLSAxNSArICdweCdcclxuXHRcdHBvc2l0aW9uLmxlZnQgPSArc25ha2Uuc3R5bGUubGVmdC5zbGljZSgwLCAtMilcclxuXHR9IGVsc2UgaWYgKHNuYWtlc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgPT09IHBsYXlncm91bmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tKSB7XHJcblx0XHRzbmFrZXNbMF0uc3R5bGUudG9wID0gJzBweCdcclxuXHRcdHBvc2l0aW9uLnRvcCA9ICtzbmFrZS5zdHlsZS50b3Auc2xpY2UoMCwgLTIpXHJcblx0fSBlbHNlIGlmIChzbmFrZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgMTUgPT09IHBsYXlncm91bmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wKSB7XHJcblx0XHRzbmFrZXNbMF0uc3R5bGUudG9wID0gcGxheWdyb3VuZC5jbGllbnRIZWlnaHQgLSAxNSArICdweCdcclxuXHRcdHBvc2l0aW9uLnRvcCA9ICtzbmFrZS5zdHlsZS50b3Auc2xpY2UoMCwgLTIpXHJcblx0fVxyXG59XHJcblxyXG5cclxuY29uc3Qgc3RlZXIgPSBlID0+IHtcclxuXHRkaXJDaGVjayhlKVxyXG5cdGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0aWYgKGUua2V5ID09PSAnQXJyb3dMZWZ0JyB8fCBlLmtleSA9PT0gJ0Fycm93UmlnaHQnKSB7XHJcblx0XHRcdG1vdmVtZW50SG9yaXpvbnRhbCgpXHJcblx0XHR9IGVsc2UgaWYgKGUua2V5ID09PSAnQXJyb3dVcCcgfHwgZS5rZXkgPT09ICdBcnJvd0Rvd24nKSB7XHJcblx0XHRcdG1vdmVtZW50VmVydGljYWwoKVxyXG5cdFx0fVxyXG4gICAgICAgIGNoZWNrUG9zaXRpb24oKVxyXG5cclxuXHRcdGlmIChzbmFrZXNbMF0uc3R5bGUudG9wID09PSBhcHBsZS5zdHlsZS50b3AgJiYgc25ha2VzWzBdLnN0eWxlLmxlZnQgPT09IGFwcGxlLnN0eWxlLmxlZnQpIHtcclxuXHRcdFx0Z3JvdygpXHJcblx0XHRcdGlmIChzY29yZSA9PT0gMCkge1xyXG5cdFx0XHRcdHdpbigpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IHNuYWtlcy5sZW5ndGggLSAxOyBpID4gMTsgaS0tKSB7XHJcblx0XHRcdGlmIChzbmFrZXNbaV0uc3R5bGUubGVmdCA9PT0gc25ha2VzWzBdLnN0eWxlLmxlZnQgJiYgc25ha2VzW2ldLnN0eWxlLnRvcCA9PT0gc25ha2VzWzBdLnN0eWxlLnRvcCkge1xyXG5cdFx0XHRcdGRlZmVhdCgpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0fSwgNTApXHJcbn1cclxuXHJcbmNvbnN0IHJlZnJlc2ggPSAoKSA9PiB7XHJcblx0Zm9yIChsZXQgaSA9IHNuYWtlcy5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XHJcbiAgICAgICAgc25ha2VzW2ldLnJlbW92ZSgpXHJcbiAgICAgICAgc25ha2VzLnBvcCgpXHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhzbmFrZXMpO1xyXG5cdGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG5cdGgxLmNsYXNzTGlzdC5yZW1vdmUoJ3dpbicpXHJcblx0aDEuY2xhc3NMaXN0LnJlbW92ZSgnbG9zdCcpXHJcblx0aDEuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgIGgxLnRleHRDb250ZW50ID0gJ25hdmlnYXRlIHdpdGggYXJyb3dzJ1xyXG5cdGRpcmVjdGlvbiA9ICcnXHJcblx0bG9zdCA9IDBcclxuXHRyYW5nZSA9IDE4MFxyXG5cdGggPSByYW5nZVxyXG5cdHJhbmdlRmxpcHBlciA9IDBcclxuXHRzY29yZSA9IGRpZmZpY3VsdHlcclxuXHRoYXNTdGFydGVkID0gMFxyXG4gICAgc3Bhbi50ZXh0Q29udGVudCA9IHNjb3JlXHJcblx0YXBwbGUuc3R5bGUudG9wID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNTApICogMTUgKyAncHgnXHJcblx0YXBwbGUuc3R5bGUubGVmdCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgwKSAqIDE1ICsgJ3B4J1xyXG5cdHNuYWtlLnN0eWxlLnRvcCA9ICczNjBweCdcclxuXHRzbmFrZS5zdHlsZS5sZWZ0ID0gJzU4NXB4J1xyXG5cdHNuYWtlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjZmZmJ1xyXG4gICAgcG9zaXRpb24udG9wID0gK3NuYWtlLnN0eWxlLnRvcC5zbGljZSgwLCAtMilcclxuICAgIHBvc2l0aW9uLmxlZnQgPSArc25ha2Uuc3R5bGUubGVmdC5zbGljZSgwLCAtMilcclxuICAgIGFwcGxlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXHJcbn1cclxuXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZSA9PiB7XHJcblx0aWYgKGxvc3QgPT09IDAgJiYgZS5rZXkuaW5jbHVkZXMoJ0Fycm93JykgJiYgaXNSZWFkeSkge1xyXG5cdFx0aXNSZWFkeSA9IGZhbHNlXHJcblx0XHRzdGVlcihlKVxyXG5cdH1cclxufSlcclxuXHJcblxyXG5cclxuYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVmcmVzaClcclxuIl19
