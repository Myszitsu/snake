"use strict";var interval,playground=document.querySelector(".playground"),snake=document.querySelector(".snake"),apple=document.querySelector(".apple"),span=document.querySelector(".span"),btn=document.querySelector(".btn"),h1=document.querySelector(".h1"),snakes=[snake],difficulty=50,direction="",lost=0,range=180,h=range,rangeFlipper=0,score=difficulty,isReady=!0,hasStarted=0,check={direction:0,translated:!1},size={width:1200,height:660};span.textContent=score,apple.style.top=15*Math.floor(Math.random()*(size.height/15))+"px",apple.style.left=15*Math.floor(Math.random()*(size.width/15))+"px",snake.style.top="".concat(size.height/2-15,"px"),snake.style.left="".concat(size.width/2-15,"px");var position={top:+snake.style.top.slice(0,-2),left:+snake.style.left.slice(0,-2)},setColor=function(e){h=range,e.style.backgroundColor="hsl(".concat(h,", 80%, 50%)"),range<360&&0===rangeFlipper?range++:360===range?(rangeFlipper=1,range--):180===--range&&(rangeFlipper=0)},app=function(){var e=document.createElement("div");e.classList.add("snake"),e.style.top=snakes[snakes.length-1].style.top,e.style.left=snakes[snakes.length-1].style.left,setColor(e),playground.append(e),snakes.push(e)},grow=function(){1===snakes.length&&(snakes[0].style.backgroundColor="hsl(".concat(h,", 80%, 50%)")),apple.style.top=15*Math.floor(Math.random()*(size.height/15))+"px",apple.style.left=15*Math.floor(Math.random()*(size.width/15))+"px",app(),score--,span.style.color="hsl(".concat(h,", 80%, 50%)"),span.textContent=score},dirCheck=function(e){0===hasStarted&&(h1.classList.remove("active"),hasStarted=1),"ArrowLeft"===e.key||"ArrowUp"===e.key?(direction=-1,clearInterval(interval)):"ArrowRight"!==e.key&&"ArrowDown"!==e.key||(direction=1,clearInterval(interval))},movementVertical=function(){if(1<snakes.length){(position.top+15*direction===+snakes[1].style.top.slice(0,-2)||check.translated&&check.direction===direction)&&(direction*=-1),position.top+=15*direction;for(var e=snakes.length-1;0<e;e--)snakes[e].style.left=snakes[e-1].style.left,snakes[e].style.top=snakes[e-1].style.top;snakes[0].style.top="".concat(position.top,"px")}else position.top+=15*direction,snakes[0].style.top="".concat(position.top,"px");isReady=!0},movementHorizontal=function(){if(1<snakes.length){(position.left+15*direction===+snakes[1].style.left.slice(0,-2)||check.translated&&check.direction===direction)&&(direction*=-1),position.left+=15*direction;for(var e=snakes.length-1;0<e;e--)snakes[e].style.left=snakes[e-1].style.left,snakes[e].style.top=snakes[e-1].style.top;snakes[0].style.left="".concat(position.left,"px")}else position.left+=15*direction,snakes[0].style.left="".concat(position.left,"px");isReady=!0},win=function(){clearInterval(interval),h1.classList.add("win"),size.width<=570?h1.textContent="you won":h1.textContent="collected all apples",lost=1,apple.style.display="none",btn.classList.add("active")},defeat=function(){clearInterval(interval),snakes.forEach(function(e){return e.style.backgroundColor="red"}),h1.classList.add("lost"),h1.textContent="game over",lost=1,apple.style.display="none",btn.classList.add("active")},checkPosition=function(){+snake.style.left.slice(0,-2)===size.width?(snakes[0].style.left="0px",position.left=+snake.style.left.slice(0,-2),check.translated=!0,check.direction=-direction):"-15px"===snakes[0].style.left?(snakes[0].style.left=playground.scrollWidth-15+"px",position.left=+snake.style.left.slice(0,-2),check.translated=!0,check.direction=-direction):+snake.style.top.slice(0,-2)===playground.clientHeight?(snakes[0].style.top="0px",position.top=+snake.style.top.slice(0,-2),check.translated=!0,check.direction=-direction):"-15px"===snakes[0].style.top?(snakes[0].style.top=playground.clientHeight-15+"px",position.top=+snake.style.top.slice(0,-2),check.translated=!0,check.direction=-direction):check.translated=!1},steer=function(t){dirCheck(t),interval=setInterval(function(){"ArrowLeft"===t.key||"ArrowRight"===t.key?movementHorizontal():"ArrowUp"!==t.key&&"ArrowDown"!==t.key||movementVertical(),checkPosition(),snakes[0].style.top===apple.style.top&&snakes[0].style.left===apple.style.left&&(grow(),0===score&&win());for(var e=snakes.length-1;1<e;e--)snakes[e].style.left===snakes[0].style.left&&snakes[e].style.top===snakes[0].style.top&&defeat()},50)},resizeWidth=function(){for(size.width=0;size.width<window.innerWidth-60;)size.width+=15;size.width%10&&(size.width-=15),playground.style.width="".concat(size.width,"px")},resizeHeight=function(){for(size.height=0;size.height<window.innerHeight-75;)size.height+=15;size.height%10&&(size.height-=15),playground.style.height="".concat(size.height,"px")},resize=function(){window.innerWidth<1260?resizeWidth():(size.width=1200,playground.style.width="".concat(size.width,"px")),restart(),window.innerHeight<=720?resizeHeight():(size.height=660,playground.style.height="".concat(size.height,"px")),restart()},restart=function(){for(var e=snakes.length-1;0<e;e--)snakes[e].remove(),snakes.pop();btn.classList.remove("active"),h1.classList.remove("win"),h1.classList.remove("lost"),h1.classList.add("active"),size.width<540?h1.textContent="use 🏹":h1.textContent="navigate with arrows",direction="",h=range=180,score=difficulty,hasStarted=rangeFlipper=lost=0,span.textContent=score,span.style.color="hsl(179, 100%, 55%)",apple.style.top=15*Math.floor(Math.random()*(size.height/15))+"px",apple.style.left=15*Math.floor(Math.random()*(size.width/15))+"px",snake.style.top="".concat(size.height/2-15,"px"),snake.style.left="".concat(size.width/2-15,"px"),snake.style.backgroundColor="#fff",position.top=+snake.style.top.slice(0,-2),position.left=+snake.style.left.slice(0,-2),apple.style.display="block"};resize(),document.addEventListener("keydown",function(e){0===lost&&e.key.includes("Arrow")&&isReady&&(isReady=!1,steer(e))}),window.addEventListener("resize",resize),btn.addEventListener("click",restart);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsic25ha2VzIiwicGxheWdyb3VuZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNuYWtlIiwiYXBwbGUiLCJzcGFuIiwiYnRuIiwiaDEiLCJkaWZmaWN1bHR5IiwiaW50ZXJ2YWwiLCJkaXJlY3Rpb24iLCJsb3N0IiwicmFuZ2UiLCJoIiwicmFuZ2VGbGlwcGVyIiwic2NvcmUiLCJoYXNTdGFydGVkIiwic2l6ZSIsIndpZHRoIiwiaGVpZ2h0IiwidGV4dENvbnRlbnQiLCJNYXRoIiwic3R5bGUiLCJsZWZ0IiwiZmxvb3IiLCJyYW5kb20iLCJ0b3AiLCJwb3NpdGlvbiIsImNvbmNhdCIsInNsaWNlIiwiYmFja2dyb3VuZENvbG9yIiwiZWwiLCJhcHAiLCJzbmFrZUVsIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImxlbmd0aCIsInNldENvbG9yIiwicHVzaCIsImNvbG9yIiwiZGlyQ2hlY2siLCJlIiwicmVtb3ZlIiwia2V5IiwiY2xlYXJJbnRlcnZhbCIsIm1vdmVtZW50VmVydGljYWwiLCJjaGVjayIsInRyYW5zbGF0ZWQiLCJpIiwiaXNSZWFkeSIsIm1vdmVtZW50SG9yaXpvbnRhbCIsIndpbiIsImZvckVhY2giLCJkaXNwbGF5IiwiY2hlY2tQb3NpdGlvbiIsImNsaWVudEhlaWdodCIsInN0ZWVyIiwic2V0SW50ZXJ2YWwiLCJncm93IiwiZGVmZWF0IiwicmVzaXplV2lkdGgiLCJ3aW5kb3ciLCJyZXNpemVIZWlnaHQiLCJpbm5lckhlaWdodCIsInJlc2l6ZSIsImlubmVyV2lkdGgiLCJyZXN0YXJ0IiwicG9wIiwiaW5jbHVkZXMiLCJhZGRFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiYUFBQSxJQU1NQSxTQU5BQyxXQUFhQyxTQUFTQyxjQUFjLGVBQ3BDQyxNQUFRRixTQUFTQyxjQUFjLFVBRC9CRixNQUFVQyxTQUFHQSxjQUFTQyxVQUN0QkMsS0FBUUYsU0FBU0MsY0FBYyxTQUMvQkUs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QUFOLFVBQTBCSCxTQUFBQSxHQUNkSSxJQUFacEIsTUFBQXVDLEVBQUFFLElBQUF5QixTQUFzQnBELFVBQUFpQyxVQUV0QnZCLFNBQVNELEVBQ1RDLE1BQUFBLE1BR0RzQyxPQUFNSyxpQkFBQSxTQUFBTCxRQUdMM0QsSUFBQWdFLGlCQUFtQixRQUFLRCIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBsYXlncm91bmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWdyb3VuZCcpXHJcbmNvbnN0IHNuYWtlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNuYWtlJylcclxuY29uc3QgYXBwbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwbGUnKVxyXG5jb25zdCBzcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNwYW4nKVxyXG5jb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuJylcclxuY29uc3QgaDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaDEnKVxyXG5jb25zdCBzbmFrZXMgPSBbc25ha2VdXHJcbmxldCBkaWZmaWN1bHR5ID0gNTBcclxubGV0IGludGVydmFsXHJcbmxldCBkaXJlY3Rpb24gPSAnJ1xyXG5sZXQgbG9zdCA9IDBcclxubGV0IHJhbmdlID0gMTgwXHJcbmxldCBoID0gcmFuZ2VcclxubGV0IHJhbmdlRmxpcHBlciA9IDBcclxubGV0IHNjb3JlID0gZGlmZmljdWx0eVxyXG5sZXQgaXNSZWFkeSA9IHRydWVcclxubGV0IGhhc1N0YXJ0ZWQgPSAwXHJcblxyXG5jb25zdCBjaGVjayA9IHtcclxuXHRkaXJlY3Rpb246IDAsXHJcblx0dHJhbnNsYXRlZDogZmFsc2UsXHJcbn1cclxuXHJcbmNvbnN0IHNpemUgPSB7XHJcblx0d2lkdGg6IDEyMDAsXHJcblx0aGVpZ2h0OiA2NjAsXHJcbn1cclxuXHJcbnNwYW4udGV4dENvbnRlbnQgPSBzY29yZVxyXG5hcHBsZS5zdHlsZS50b3AgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoc2l6ZS5oZWlnaHQgLyAxNSkpICogMTUgKyAncHgnXHJcbmFwcGxlLnN0eWxlLmxlZnQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoc2l6ZS53aWR0aCAvIDE1KSkgKiAxNSArICdweCdcclxuc25ha2Uuc3R5bGUudG9wID0gYCR7c2l6ZS5oZWlnaHQgLyAyIC0gMTV9cHhgXHJcbnNuYWtlLnN0eWxlLmxlZnQgPSBgJHtzaXplLndpZHRoIC8gMiAtIDE1fXB4YFxyXG5cclxuY29uc3QgcG9zaXRpb24gPSB7XHJcblx0dG9wOiArc25ha2Uuc3R5bGUudG9wLnNsaWNlKDAsIC0yKSxcclxuXHRsZWZ0OiArc25ha2Uuc3R5bGUubGVmdC5zbGljZSgwLCAtMiksXHJcbn1cclxuXHJcbmNvbnN0IHNldENvbG9yID0gZWwgPT4ge1xyXG5cdGggPSByYW5nZVxyXG5cdGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGBoc2woJHtofSwgODAlLCA1MCUpYFxyXG5cdGlmIChyYW5nZSA8IDM2MCAmJiByYW5nZUZsaXBwZXIgPT09IDApIHtcclxuXHRcdHJhbmdlKytcclxuXHR9IGVsc2UgaWYgKHJhbmdlID09PSAzNjApIHtcclxuXHRcdHJhbmdlRmxpcHBlciA9IDFcclxuXHRcdHJhbmdlLS1cclxuXHR9IGVsc2Uge1xyXG5cdFx0cmFuZ2UtLVxyXG5cdFx0aWYgKHJhbmdlID09PSAxODApIHtcclxuXHRcdFx0cmFuZ2VGbGlwcGVyID0gMFxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuY29uc3QgYXBwID0gKCkgPT4ge1xyXG5cdGNvbnN0IHNuYWtlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cdHNuYWtlRWwuY2xhc3NMaXN0LmFkZCgnc25ha2UnKVxyXG5cdHNuYWtlRWwuc3R5bGUudG9wID0gc25ha2VzW3NuYWtlcy5sZW5ndGggLSAxXS5zdHlsZS50b3BcclxuXHRzbmFrZUVsLnN0eWxlLmxlZnQgPSBzbmFrZXNbc25ha2VzLmxlbmd0aCAtIDFdLnN0eWxlLmxlZnRcclxuXHRzZXRDb2xvcihzbmFrZUVsKVxyXG5cclxuXHRwbGF5Z3JvdW5kLmFwcGVuZChzbmFrZUVsKVxyXG5cdHNuYWtlcy5wdXNoKHNuYWtlRWwpXHJcbn1cclxuXHJcbmNvbnN0IGdyb3cgPSAoKSA9PiB7XHJcblx0aWYgKHNuYWtlcy5sZW5ndGggPT09IDEpIHtcclxuXHRcdHNuYWtlc1swXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBgaHNsKCR7aH0sIDgwJSwgNTAlKWBcclxuXHR9XHJcblx0YXBwbGUuc3R5bGUudG9wID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHNpemUuaGVpZ2h0IC8gMTUpKSAqIDE1ICsgJ3B4J1xyXG5cdGFwcGxlLnN0eWxlLmxlZnQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoc2l6ZS53aWR0aCAvIDE1KSkgKiAxNSArICdweCdcclxuXHRhcHAoKVxyXG5cdHNjb3JlLS1cclxuXHRzcGFuLnN0eWxlLmNvbG9yID0gYGhzbCgke2h9LCA4MCUsIDUwJSlgXHJcblx0c3Bhbi50ZXh0Q29udGVudCA9IHNjb3JlXHJcbn1cclxuXHJcbmNvbnN0IGRpckNoZWNrID0gZSA9PiB7XHJcblx0aWYgKGhhc1N0YXJ0ZWQgPT09IDApIHtcclxuXHRcdGgxLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcblx0XHRoYXNTdGFydGVkID0gMVxyXG5cdH1cclxuXHRpZiAoZS5rZXkgPT09ICdBcnJvd0xlZnQnIHx8IGUua2V5ID09PSAnQXJyb3dVcCcpIHtcclxuXHRcdGRpcmVjdGlvbiA9IC0xXHJcblx0XHRjbGVhckludGVydmFsKGludGVydmFsKVxyXG5cdH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1JpZ2h0JyB8fCBlLmtleSA9PT0gJ0Fycm93RG93bicpIHtcclxuXHRcdGRpcmVjdGlvbiA9IDFcclxuXHRcdGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpXHJcblx0fVxyXG59XHJcblxyXG4vLyBjb25zdCBtb3ZlbWVudFZlcnRpY2FsID0gKCkgPT4ge1xyXG4vLyBcdGlmIChcclxuLy8gXHRcdChzbmFrZXMubGVuZ3RoID4gMSAmJiBwb3NpdGlvbi50b3AgKyAxNSAqIGRpcmVjdGlvbiA9PT0gK3NuYWtlc1sxXS5zdHlsZS50b3Auc2xpY2UoMCwgLTIpKSB8fFxyXG4vLyBcdFx0KHNuYWtlcy5sZW5ndGggPiAxICYmIGNoZWNrLnRyYW5zbGF0ZWQgJiYgY2hlY2suZGlyZWN0aW9uID09PSBkaXJlY3Rpb24pXHJcbi8vIFx0KSB7XHJcbi8vIFx0XHRkaXJlY3Rpb24gKj0gLTFcclxuLy8gXHR9XHJcbi8vIFx0cG9zaXRpb24udG9wICs9IDE1ICogZGlyZWN0aW9uXHJcbi8vIFx0aWYgKHNuYWtlcy5sZW5ndGggPiAxKSB7XHJcbi8vIFx0XHRmb3IgKGxldCBpID0gc25ha2VzLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuLy8gXHRcdFx0c25ha2VzW2ldLnN0eWxlLmxlZnQgPSBzbmFrZXNbaSAtIDFdLnN0eWxlLmxlZnRcclxuLy8gXHRcdFx0c25ha2VzW2ldLnN0eWxlLnRvcCA9IHNuYWtlc1tpIC0gMV0uc3R5bGUudG9wXHJcbi8vIFx0XHR9XHJcbi8vIFx0XHRzbmFrZXNbMF0uc3R5bGUudG9wID0gYCR7cG9zaXRpb24udG9wfXB4YFxyXG4vLyBcdH0gZWxzZSBpZiAoc25ha2VzLmxlbmd0aCA9PT0gMSkge1xyXG4vLyBcdFx0c25ha2VzWzBdLnN0eWxlLnRvcCA9IGAke3Bvc2l0aW9uLnRvcH1weGBcclxuLy8gXHR9XHJcblxyXG4vLyBcdGlzUmVhZHkgPSB0cnVlXHJcbi8vIH1cclxuY29uc3QgbW92ZW1lbnRWZXJ0aWNhbCA9ICgpID0+IHtcclxuXHRpZiAoc25ha2VzLmxlbmd0aCA+IDEpIHtcclxuXHRcdGlmIChcclxuXHRcdFx0cG9zaXRpb24udG9wICsgMTUgKiBkaXJlY3Rpb24gPT09ICtzbmFrZXNbMV0uc3R5bGUudG9wLnNsaWNlKDAsIC0yKSB8fFxyXG5cdFx0XHQoY2hlY2sudHJhbnNsYXRlZCAmJiBjaGVjay5kaXJlY3Rpb24gPT09IGRpcmVjdGlvbilcclxuXHRcdCkge1xyXG5cdFx0XHRkaXJlY3Rpb24gKj0gLTFcclxuXHRcdH1cclxuXHRcdHBvc2l0aW9uLnRvcCArPSAxNSAqIGRpcmVjdGlvblxyXG5cdFx0Zm9yIChsZXQgaSA9IHNuYWtlcy5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XHJcblx0XHRcdHNuYWtlc1tpXS5zdHlsZS5sZWZ0ID0gc25ha2VzW2kgLSAxXS5zdHlsZS5sZWZ0XHJcblx0XHRcdHNuYWtlc1tpXS5zdHlsZS50b3AgPSBzbmFrZXNbaSAtIDFdLnN0eWxlLnRvcFxyXG5cdFx0fVxyXG5cdFx0c25ha2VzWzBdLnN0eWxlLnRvcCA9IGAke3Bvc2l0aW9uLnRvcH1weGBcclxuXHR9IGVsc2Uge1xyXG5cdFx0cG9zaXRpb24udG9wICs9IDE1ICogZGlyZWN0aW9uXHJcblx0XHRzbmFrZXNbMF0uc3R5bGUudG9wID0gYCR7cG9zaXRpb24udG9wfXB4YFxyXG5cdH1cclxuXHJcblx0aXNSZWFkeSA9IHRydWVcclxufVxyXG5cclxuLy8gY29uc3QgbW92ZW1lbnRIb3Jpem9udGFsID0gKCkgPT4ge1xyXG4vLyBcdGlmIChcclxuLy8gXHRcdChzbmFrZXMubGVuZ3RoID4gMSAmJiBwb3NpdGlvbi5sZWZ0ICsgMTUgKiBkaXJlY3Rpb24gPT09ICtzbmFrZXNbMV0uc3R5bGUubGVmdC5zbGljZSgwLCAtMikpIHx8XHJcbi8vIFx0XHQoc25ha2VzLmxlbmd0aCA+IDEgJiYgY2hlY2sudHJhbnNsYXRlZCAmJiBjaGVjay5kaXJlY3Rpb24gPT09IGRpcmVjdGlvbilcclxuLy8gXHQpIHtcclxuLy8gXHRcdGRpcmVjdGlvbiAqPSAtMVxyXG4vLyBcdH1cclxuLy8gXHRwb3NpdGlvbi5sZWZ0ICs9IDE1ICogZGlyZWN0aW9uXHJcblxyXG4vLyBcdGlmIChzbmFrZXMubGVuZ3RoID4gMSkge1xyXG4vLyBcdFx0Zm9yIChsZXQgaSA9IHNuYWtlcy5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XHJcbi8vIFx0XHRcdHNuYWtlc1tpXS5zdHlsZS5sZWZ0ID0gc25ha2VzW2kgLSAxXS5zdHlsZS5sZWZ0XHJcbi8vIFx0XHRcdHNuYWtlc1tpXS5zdHlsZS50b3AgPSBzbmFrZXNbaSAtIDFdLnN0eWxlLnRvcFxyXG4vLyBcdFx0fVxyXG4vLyBcdFx0c25ha2VzWzBdLnN0eWxlLmxlZnQgPSBgJHtwb3NpdGlvbi5sZWZ0fXB4YFxyXG4vLyBcdH0gZWxzZSBpZiAoc25ha2VzLmxlbmd0aCA9PT0gMSkge1xyXG4vLyBcdFx0c25ha2VzWzBdLnN0eWxlLmxlZnQgPSBgJHtwb3NpdGlvbi5sZWZ0fXB4YFxyXG4vLyBcdH1cclxuXHJcbi8vIFx0aXNSZWFkeSA9IHRydWVcclxuLy8gfVxyXG5jb25zdCBtb3ZlbWVudEhvcml6b250YWwgPSAoKSA9PiB7XHJcblx0aWYgKHNuYWtlcy5sZW5ndGggPiAxKSB7XHJcblx0XHRpZiAoXHJcblx0XHRcdHBvc2l0aW9uLmxlZnQgKyAxNSAqIGRpcmVjdGlvbiA9PT0gK3NuYWtlc1sxXS5zdHlsZS5sZWZ0LnNsaWNlKDAsIC0yKSB8fFxyXG5cdFx0XHQoY2hlY2sudHJhbnNsYXRlZCAmJiBjaGVjay5kaXJlY3Rpb24gPT09IGRpcmVjdGlvbilcclxuXHRcdCkge1xyXG5cdFx0XHRkaXJlY3Rpb24gKj0gLTFcclxuXHRcdH1cclxuXHRcdHBvc2l0aW9uLmxlZnQgKz0gMTUgKiBkaXJlY3Rpb25cclxuXHJcblx0XHRmb3IgKGxldCBpID0gc25ha2VzLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuXHRcdFx0c25ha2VzW2ldLnN0eWxlLmxlZnQgPSBzbmFrZXNbaSAtIDFdLnN0eWxlLmxlZnRcclxuXHRcdFx0c25ha2VzW2ldLnN0eWxlLnRvcCA9IHNuYWtlc1tpIC0gMV0uc3R5bGUudG9wXHJcblx0XHR9XHJcblx0XHRzbmFrZXNbMF0uc3R5bGUubGVmdCA9IGAke3Bvc2l0aW9uLmxlZnR9cHhgXHJcblx0fSBlbHNlIHtcclxuXHRcdHBvc2l0aW9uLmxlZnQgKz0gMTUgKiBkaXJlY3Rpb25cclxuXHRcdHNuYWtlc1swXS5zdHlsZS5sZWZ0ID0gYCR7cG9zaXRpb24ubGVmdH1weGBcclxuXHR9XHJcblxyXG5cdGlzUmVhZHkgPSB0cnVlXHJcbn1cclxuXHJcbmNvbnN0IHdpbiA9ICgpID0+IHtcclxuXHRjbGVhckludGVydmFsKGludGVydmFsKVxyXG5cdGgxLmNsYXNzTGlzdC5hZGQoJ3dpbicpXHJcblx0aWYgKHNpemUud2lkdGggPD0gNTcwKSB7XHJcblx0XHRoMS50ZXh0Q29udGVudCA9ICd5b3Ugd29uJ1xyXG5cdH0gZWxzZSB7XHJcblx0XHRoMS50ZXh0Q29udGVudCA9ICdjb2xsZWN0ZWQgYWxsIGFwcGxlcydcclxuXHR9XHJcblx0bG9zdCA9IDFcclxuXHRhcHBsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcblx0YnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbn1cclxuXHJcbmNvbnN0IGRlZmVhdCA9ICgpID0+IHtcclxuXHRjbGVhckludGVydmFsKGludGVydmFsKVxyXG5cdHNuYWtlcy5mb3JFYWNoKHMgPT4gKHMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JlZCcpKVxyXG5cdGgxLmNsYXNzTGlzdC5hZGQoJ2xvc3QnKVxyXG5cdGgxLnRleHRDb250ZW50ID0gJ2dhbWUgb3ZlcidcclxuXHRsb3N0ID0gMVxyXG5cdGFwcGxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuXHRidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxufVxyXG5cclxuLy8gY29uc3QgY2hlY2tQb3NpdGlvbiA9ICgpID0+IHtcclxuLy8gXHRpZiAoc25ha2VzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgPT09IHBsYXlncm91bmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQpIHtcclxuLy8gXHRcdHNuYWtlc1swXS5zdHlsZS5sZWZ0ID0gYDBweGBcclxuLy8gXHRcdHBvc2l0aW9uLmxlZnQgPSArc25ha2Uuc3R5bGUubGVmdC5zbGljZSgwLCAtMilcclxuLy8gXHR9IGVsc2UgaWYgKHNuYWtlc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgMTUgPT09IHBsYXlncm91bmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCkge1xyXG4vLyBcdFx0c25ha2VzWzBdLnN0eWxlLmxlZnQgPSBwbGF5Z3JvdW5kLmNsaWVudFdpZHRoIC0gMTUgKyAncHgnXHJcbi8vIFx0XHRwb3NpdGlvbi5sZWZ0ID0gK3NuYWtlLnN0eWxlLmxlZnQuc2xpY2UoMCwgLTIpXHJcbi8vIFx0fSBlbHNlIGlmIChzbmFrZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wID09PSBwbGF5Z3JvdW5kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSkge1xyXG4vLyBcdFx0c25ha2VzWzBdLnN0eWxlLnRvcCA9ICcwcHgnXHJcbi8vIFx0XHRwb3NpdGlvbi50b3AgPSArc25ha2Uuc3R5bGUudG9wLnNsaWNlKDAsIC0yKVxyXG4vLyBcdH0gZWxzZSBpZiAoc25ha2VzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIDE1ID09PSBwbGF5Z3JvdW5kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCkge1xyXG4vLyBcdFx0c25ha2VzWzBdLnN0eWxlLnRvcCA9IHBsYXlncm91bmQuY2xpZW50SGVpZ2h0IC0gMTUgKyAncHgnXHJcbi8vIFx0XHRwb3NpdGlvbi50b3AgPSArc25ha2Uuc3R5bGUudG9wLnNsaWNlKDAsIC0yKVxyXG4vLyBcdH1cclxuLy8gfVxyXG5cclxuLy8gc25ha2VzWzBdLnN0eWxlLmxlZnQgPSAnMTIwMHB4J1xyXG5jb25zdCBjaGVja1Bvc2l0aW9uID0gKCkgPT4ge1xyXG5cdGlmICgrc25ha2Uuc3R5bGUubGVmdC5zbGljZSgwLCAtMikgPT09IHNpemUud2lkdGgpIHtcclxuXHRcdHNuYWtlc1swXS5zdHlsZS5sZWZ0ID0gYDBweGBcclxuXHRcdHBvc2l0aW9uLmxlZnQgPSArc25ha2Uuc3R5bGUubGVmdC5zbGljZSgwLCAtMilcclxuXHRcdGNoZWNrLnRyYW5zbGF0ZWQgPSB0cnVlXHJcblx0XHRjaGVjay5kaXJlY3Rpb24gPSAtZGlyZWN0aW9uXHJcblx0fSBlbHNlIGlmIChzbmFrZXNbMF0uc3R5bGUubGVmdCA9PT0gJy0xNXB4Jykge1xyXG5cdFx0c25ha2VzWzBdLnN0eWxlLmxlZnQgPSBwbGF5Z3JvdW5kLnNjcm9sbFdpZHRoIC0gMTUgKyAncHgnXHJcblx0XHRwb3NpdGlvbi5sZWZ0ID0gK3NuYWtlLnN0eWxlLmxlZnQuc2xpY2UoMCwgLTIpXHJcblx0XHRjaGVjay50cmFuc2xhdGVkID0gdHJ1ZVxyXG5cdFx0Y2hlY2suZGlyZWN0aW9uID0gLWRpcmVjdGlvblxyXG5cdH0gZWxzZSBpZiAoK3NuYWtlLnN0eWxlLnRvcC5zbGljZSgwLCAtMikgPT09IHBsYXlncm91bmQuY2xpZW50SGVpZ2h0KSB7XHJcblx0XHRzbmFrZXNbMF0uc3R5bGUudG9wID0gJzBweCdcclxuXHRcdHBvc2l0aW9uLnRvcCA9ICtzbmFrZS5zdHlsZS50b3Auc2xpY2UoMCwgLTIpXHJcblx0XHRjaGVjay50cmFuc2xhdGVkID0gdHJ1ZVxyXG5cdFx0Y2hlY2suZGlyZWN0aW9uID0gLWRpcmVjdGlvblxyXG5cdH0gZWxzZSBpZiAoc25ha2VzWzBdLnN0eWxlLnRvcCA9PT0gJy0xNXB4Jykge1xyXG5cdFx0c25ha2VzWzBdLnN0eWxlLnRvcCA9IHBsYXlncm91bmQuY2xpZW50SGVpZ2h0IC0gMTUgKyAncHgnXHJcblx0XHRwb3NpdGlvbi50b3AgPSArc25ha2Uuc3R5bGUudG9wLnNsaWNlKDAsIC0yKVxyXG5cdFx0Y2hlY2sudHJhbnNsYXRlZCA9IHRydWVcclxuXHRcdGNoZWNrLmRpcmVjdGlvbiA9IC1kaXJlY3Rpb25cclxuXHR9IGVsc2Uge1xyXG5cdFx0Y2hlY2sudHJhbnNsYXRlZCA9IGZhbHNlXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBzdGVlciA9IGUgPT4ge1xyXG5cdGRpckNoZWNrKGUpXHJcblx0aW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRpZiAoZS5rZXkgPT09ICdBcnJvd0xlZnQnIHx8IGUua2V5ID09PSAnQXJyb3dSaWdodCcpIHtcclxuXHRcdFx0bW92ZW1lbnRIb3Jpem9udGFsKClcclxuXHRcdH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJyB8fCBlLmtleSA9PT0gJ0Fycm93RG93bicpIHtcclxuXHRcdFx0bW92ZW1lbnRWZXJ0aWNhbCgpXHJcblx0XHR9XHJcblx0XHRjaGVja1Bvc2l0aW9uKClcclxuXHJcblx0XHRpZiAoc25ha2VzWzBdLnN0eWxlLnRvcCA9PT0gYXBwbGUuc3R5bGUudG9wICYmIHNuYWtlc1swXS5zdHlsZS5sZWZ0ID09PSBhcHBsZS5zdHlsZS5sZWZ0KSB7XHJcblx0XHRcdGdyb3coKVxyXG5cdFx0XHRpZiAoc2NvcmUgPT09IDApIHtcclxuXHRcdFx0XHR3aW4oKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IHNuYWtlcy5sZW5ndGggLSAxOyBpID4gMTsgaS0tKSB7XHJcblx0XHRcdGlmIChzbmFrZXNbaV0uc3R5bGUubGVmdCA9PT0gc25ha2VzWzBdLnN0eWxlLmxlZnQgJiYgc25ha2VzW2ldLnN0eWxlLnRvcCA9PT0gc25ha2VzWzBdLnN0eWxlLnRvcCkge1xyXG5cdFx0XHRcdGRlZmVhdCgpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LCA1MClcclxufVxyXG5cclxuY29uc3QgcmVzaXplV2lkdGggPSAoKSA9PiB7XHJcblx0c2l6ZS53aWR0aCA9IDBcclxuXHR3aGlsZSAoc2l6ZS53aWR0aCA8IHdpbmRvdy5pbm5lcldpZHRoIC0gNjApIHtcclxuXHRcdHNpemUud2lkdGggKz0gMTVcclxuXHR9XHJcblx0aWYgKHNpemUud2lkdGggJSAxMCkge1xyXG5cdFx0c2l6ZS53aWR0aCAtPSAxNVxyXG5cdH1cclxuXHJcblx0cGxheWdyb3VuZC5zdHlsZS53aWR0aCA9IGAke3NpemUud2lkdGh9cHhgXHJcbn1cclxuXHJcbmNvbnN0IHJlc2l6ZUhlaWdodCA9ICgpID0+IHtcclxuXHRzaXplLmhlaWdodCA9IDBcclxuXHR3aGlsZSAoc2l6ZS5oZWlnaHQgPCB3aW5kb3cuaW5uZXJIZWlnaHQgLSA3NSkge1xyXG5cdFx0c2l6ZS5oZWlnaHQgKz0gMTVcclxuXHR9XHJcblxyXG5cdGlmIChzaXplLmhlaWdodCAlIDEwKSB7XHJcblx0XHRzaXplLmhlaWdodCAtPSAxNVxyXG5cdH1cclxuXHJcblx0cGxheWdyb3VuZC5zdHlsZS5oZWlnaHQgPSBgJHtzaXplLmhlaWdodH1weGBcclxufVxyXG5cclxuY29uc3QgcmVzaXplID0gKCkgPT4ge1xyXG5cdGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDEyNjApIHtcclxuXHRcdHJlc2l6ZVdpZHRoKClcclxuXHRcdHJlc3RhcnQoKVxyXG5cdH0gZWxzZSB7XHJcblx0XHRzaXplLndpZHRoID0gMTIwMFxyXG5cdFx0cGxheWdyb3VuZC5zdHlsZS53aWR0aCA9IGAke3NpemUud2lkdGh9cHhgXHJcblx0XHRyZXN0YXJ0KClcclxuXHR9XHJcblx0aWYgKHdpbmRvdy5pbm5lckhlaWdodCA8PSA3MjApIHtcclxuXHRcdHJlc2l6ZUhlaWdodCgpXHJcblx0XHRyZXN0YXJ0KClcclxuXHR9IGVsc2Uge1xyXG5cdFx0c2l6ZS5oZWlnaHQgPSA2NjBcclxuXHRcdHBsYXlncm91bmQuc3R5bGUuaGVpZ2h0ID0gYCR7c2l6ZS5oZWlnaHR9cHhgXHJcblx0XHRyZXN0YXJ0KClcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IHJlc3RhcnQgPSAoKSA9PiB7XHJcblx0Zm9yIChsZXQgaSA9IHNuYWtlcy5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XHJcblx0XHRzbmFrZXNbaV0ucmVtb3ZlKClcclxuXHRcdHNuYWtlcy5wb3AoKVxyXG5cdH1cclxuXHRidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuXHRoMS5jbGFzc0xpc3QucmVtb3ZlKCd3aW4nKVxyXG5cdGgxLmNsYXNzTGlzdC5yZW1vdmUoJ2xvc3QnKVxyXG5cdGgxLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcblx0aWYgKHNpemUud2lkdGggPCA1NDApIHtcclxuXHRcdGgxLnRleHRDb250ZW50ID0gJ3VzZSDwn4+5J1xyXG5cdH0gZWxzZSB7XHJcblx0XHRoMS50ZXh0Q29udGVudCA9ICduYXZpZ2F0ZSB3aXRoIGFycm93cydcclxuXHR9XHJcblx0ZGlyZWN0aW9uID0gJydcclxuXHRsb3N0ID0gMFxyXG5cdHJhbmdlID0gMTgwXHJcblx0aCA9IHJhbmdlXHJcblx0cmFuZ2VGbGlwcGVyID0gMFxyXG5cdHNjb3JlID0gZGlmZmljdWx0eVxyXG5cdGhhc1N0YXJ0ZWQgPSAwXHJcblx0c3Bhbi50ZXh0Q29udGVudCA9IHNjb3JlXHJcblx0c3Bhbi5zdHlsZS5jb2xvciA9ICdoc2woMTc5LCAxMDAlLCA1NSUpJ1xyXG5cdGFwcGxlLnN0eWxlLnRvcCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChzaXplLmhlaWdodCAvIDE1KSkgKiAxNSArICdweCdcclxuXHRhcHBsZS5zdHlsZS5sZWZ0ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHNpemUud2lkdGggLyAxNSkpICogMTUgKyAncHgnXHJcblx0c25ha2Uuc3R5bGUudG9wID0gYCR7c2l6ZS5oZWlnaHQgLyAyIC0gMTV9cHhgXHJcblx0c25ha2Uuc3R5bGUubGVmdCA9IGAke3NpemUud2lkdGggLyAyIC0gMTV9cHhgXHJcblx0c25ha2Uuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmZmYnXHJcblx0cG9zaXRpb24udG9wID0gK3NuYWtlLnN0eWxlLnRvcC5zbGljZSgwLCAtMilcclxuXHRwb3NpdGlvbi5sZWZ0ID0gK3NuYWtlLnN0eWxlLmxlZnQuc2xpY2UoMCwgLTIpXHJcblx0YXBwbGUuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcclxufVxyXG5yZXNpemUoKVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGUgPT4ge1xyXG5cdGlmIChsb3N0ID09PSAwICYmIGUua2V5LmluY2x1ZGVzKCdBcnJvdycpICYmIGlzUmVhZHkpIHtcclxuXHRcdC8vIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpXHJcblx0XHRpc1JlYWR5ID0gZmFsc2VcclxuXHRcdHN0ZWVyKGUpXHJcblx0fVxyXG59KVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZSlcclxuXHJcbmJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlc3RhcnQpXHJcbiJdfQ==
